# Chapter 16. 힙

힙은 O(1) 시간에 가장 높은 항목이나 가장 낮은 항목을 반환하는 중요한 자료 구조다.

### 힙에 대한 이해

힙은 트리와 비슷한 자료 구조의 일종으로, 최대 힙의 경우 부모가 자식보다 크고 최소 힙의 경우 부모가 자식보다 작다.  
이러한 힙의 특성은 자료를 정렬하는 데 유용하다.

다른 자료 구조와 달리 힙은 자식에 대한 포인터를 갖는 대신에 배열을 사용해 자료를 저장한다.  
배열에서 힙 노드의 자식 위치를 쉽게 계산할 수 있다.  
힙을 사용하면 부모와 자식 간의 관계를 쉽게 정의할 수 있기 때문이다.

다양한 종류의 힙이 있다.  
힙이 배열을 사용해 자료를 저장하기 때문에 배열의 인덱스는 각 항목의 차수/높이를 정의한다.  
첫 번째 배열 항목을 루트로 설정한 다음 각 왼쪽 항목과 오른쪽 항목을 순서대로 채움으로써 이진 힙을 만들 수 있다.

최대 힙과 최소 힙 두 종류의 이진 힙이 있다.  
최대 힙의 경우 루트 노드가 가장 높은 값을 갖고 각 노드의 값이 자식의 값보다 크다.  
최소 힙의 경우 루트 노드가 가장 낮은 값을 갖고 각 노드의 값이 자식의 값보다 작다.

힙은 문자열과 정수, 심지어 사용자 정의 클래스와 같이 어떤 종류의 값이든 저장할 수 있다.

##### 최대 힙

최대 힙은 부모가 모든 자식보다 항상 큰 힙이다.

##### 최소 힙

최소 힙은 부모가 모든 자식보다 항상 작은 값이다.

### 이진 힙 배열 인덱스 구조

이진 힙의 경우 힙을 나타내기 위해 배열이 사용되는데 다음과 같이 인덱스를 사용한다.

| 노드        | 인덱스      |
| ----------- | ----------- |
| 자신        | N           |
| 부모        | (N - 1) / 2 |
| 왼쪽 자식   | (N * 2) + 1 |
| 오른쪽 자식 | (N * 2) + 2 |

- Heap.js

##### 삼투: 위로 아래로 이동

항목을 추가하거나 삭제할 때 힙의 구조가 유지돼야 한다.

p. 300 ~ 302 참고

##### 삼투 구현하기

삼투의 '위로 이동과 아래로 이등'을 구현하기 위해서는 최소 힙 구조의 제일 위에 최솟값 항목이 위치할 때까지 항목을 교환해야 한다.  
아래로 이동하기 위해서는 최상위 항목을 자식 중 하나와 교환해야 한다.

최대 힙 구현은 최소 힙 구현과 비교자 부분만 다르다.

- MinHeap.js

##### 최대 힙 예

p. 304 ~ 306 참고

### 최소 힙 구현 완성

- MinHeap.js

### 최대 힙 구현 완성

- MaxHeap.js

### 힙 정렬

힙을 사용해 정렬하는 것은 간단하다.  
정렬된 배열을 얻기 위해 힙이 빈 상태가 될 때까지 힙에 대해 .pop()을 호출하면서 꺼낸 객체를 저장하기만 하면 된다.

삼투가 O(log2(n))의 시간이 걸리고 정렬이 n개의 항목들을 꺼내야 하기 때문에 힙 정렬의 시간 복잡도는 빠른 정렬과 병합 정렬과 마찬가지로 O(log2(n))이다.

##### 오름차순 정렬(최소 힙)

p. 310 ~ 312 참고

##### 내림차순 정렬(최대 힙)

p. 313 ~ 315 참고

### 요약

힙은 배열을 사용해 표현한 트리와 같은 자료 구조다.  
트리 노드의 부모와 왼쪽 자식, 오른쪽 자식을 얻기 위해 다음 표의 인덱스 공식을 사용할 수 있다.

| 노드        | 인덱스      |
| ----------- | ----------- |
| (자신)      | N           |
| 부모        | (N - 1) / 2 |
| 왼쪽 자식   | (N * 2) + 1 |
| 오른쪽 자식 | (N * 2) + 2 |

힙은 삼투를 통해 자신의 구조를 유지한다.  
노드가 삽입됐을 때 힙의 구조가 올바르게 될 때까지 항목들을 반복적으로 교환하면서 노드를 위로 이동시킨다.  
최소 힙의 경우 이는 최솟값을 지닌 노드가 루트에 있음을 의미한다.  
최대 힙의 경우 이는 최고 값을 지닌 노드가 루트에 있음을 의미한다.  
힙은 근본적으로 삼투를 통해 동작한다.  
삼투 덕분에 삭제와 삽입이 O(log2(n)) 시간에 가능하다.

| 연산                           | 시간 복잡도  |
| ------------------------------ | ------------ |
| 삭제("아래로 이동"으로 이어짐) | O(log2(n))   |
| 삽입("위로 이동"으로 이어짐)   | O(log2(n))   |
| 힙 정렬                        | O(n log2(n)) |