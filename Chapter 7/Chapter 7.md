# Chapter 7. 자바스크립트 메모리 관리

어떤 프로그램이든 변수는 메모리를 차지한다.
V8 자바스크립트 엔진과 다른 최신 자바스크립트 엔진에는 프로그래머를 위해 사용하지 않는 변수를 삭제하는 가비지 컬렉터가 있다.

### 메모리 누수

메모리 누수는 프로그램에서 버려진 메모리를 해제하지 못한 경우를 말한다.
이로 인해 성능이 떨어지고 간혹 프로그램 자체가 중단되기도 한다.
메모리 누수는 자바스크립트 엔진의 가비지 컬렉터가 메모리를 올바른 방식으로 해제하지 않은 경우 발생할 수 있다.

##### 객체에 대한 참조

객체에 대한 참조가 있다면 해당 참조는 메모리에 있는 것이다.

```javascript
var foo = {
 	bar1: memory(), // 5kb
  bar2: memory() // 5kb
}

function clickEvent() {
  alert(foo.bar1);
}
```

위 코드에서 clickEvent() 함수는 10KB의 메모리를 사용한다.
bar1 속성에 접근하기 위해서는 foo 객체 전체를 clickEvent() 함수의 범위에 로딩해야 하기 때문이다.

##### DOM 메모리 누수

DOM 항목을 가리키는 변수가 이벤트 콜백 외부에 선언된 경우 해당 DOM 항목을 제거하더라도 해당 항목은 여전히 메모리에 남게 된다.

p.132 ~ 133 참고

##### window 전역 객체

객체가 window 전역 객체에 포함되는 경우 해당 객체는 메모리에 존재하는 것이다.
window는 브라우저에서 전역 객체이며 alert()과 setTimeout()과 같은 다양한 내장 메소드를 지닌다.
window의 속성으로 선언된 추가적인 객체는 모두 제거할 수 없다.
window는 브라우저가 실행하는 데 필요한 객체이기 때문이다.
모든 선언된 전역변수는 window 객체의 속성으로 설정될 수 있다는 점을 기억하자.

##### 객체 참조 제한하기

객체에 대한 모든 참조가 제거되면 해당 객체는 제거된다.
함수에 객체의 전체 범위가 아닌 필요한 범위만 전달해야 하며 특히 전체 객체가 아닌 필요한 속성만 전달하도록 해야 한다.
해당 객체의 단 하나의 속성만 필요한 경우 전체 객체를 매개변수로 전달해서는 안 된다.

##### delete 연산자

원치 않는 객체 속성을 제거하기 위해 delete 연산자를 사용할 수 있다는 점을 꼭 기억하자.

### 요약

자바스크립트에서 메모리는 프로그래머에 의해 할당되지 않지만 여전히 메모리 누수 문제를 줄이기 위한 다양한 방법들이 있다.