# Chapter 17. 그래프

그래프를 사용하면 객체 간의 연결을 다양하게 나타낼 수 있다.

### 그래프 기본

- 정점: 그래프를 형성하는 노드다.
- 간선: 그래프에서 노드 간의 연결을 말한다.
- 정점 차수: 해당 정점에 연결된 간선의 개수를 나타낸다.
- 희소 그래프: 정점들 간에 가능한 연결 중 일부만 존재하는 경우 그래프를 희소 그래프라고 한다.
- 밀집 그래프: 다양한 정점들 간에 연결이 많은 경우 해당 그래프를 밀집 그래프라고 한다.
- 순환 그래프: 어떤 정점에서 출발해 해당 정점으로 다시 돌아오는 경로가 존재하는 지향성 그래프를 말한다.
- 가중치: 간선에 대한 값으로, 문맥에 따라 다양한 것을 나타낼 수 있따.

### 무지향성 그래프

무지향성 그래프는 간선 간에 방향이 없는 그래프다.  
간선은 두 노드 간에 방향 없이 상호 연결을 암시한다.

무지향성 그래프를 자료 구조 클래스로 표현하는 다양한 방법이 있다.  
가장 흔한 방법 두 가지로 인접 행렬과 인접 리스트를 사용할 수 있다.  
인접 리스트는 정점을 노드의 키로 사용하며 해당 노드의 이웃들을 리스트에 저장한다.  
반면 인접 행렬은 행렬의 각 항목이 두 정점 간에 연결을 나타내는 V x V 행렬이다.

##### 간선과 정점 추가하기

무지향성 그래프는 간선을 저장하기 위한 객체를 지녀야 한다.

간선을 추가하기 위해 정점이 우선 추가돼야 한다.

무지향성 그래프에 가중치가 있는 간선을 추가하기 위해서는 this.edges 객체의 양쪽 정점을 사용해 가중치를 저장한다.

- UndirectedGraph.js

##### 간선과 정점 삭제하기

정점으로부터 간선을 삭제하기 위해서는 this.edges에서 해당 정점에 대한 간선 객체를 찾아서 자바스크립트의 delete 연산자를 사용해 해당 간선을 삭제해야 한다.

정점이 삭제될 때마다 해당 간선과 연결된 모든 간선도 삭제돼야 한다.

- UndirectedGraph.js

### 지향성 그래프

지향성 그래프는 정점 간에 방향이 있는 그래프다.  
지향성 그래프의 각 간선은 한 정점에서 다른 정점으로 향한다.

간선이 원점이 되는 정점에서 출발해 도착점이 되는 정점에서 끝난다는 점을 고려할 때 지향성 그래프에서 간선을 추가하기 위해서는 가중치를 원점이 되는 정점에만 설정해야 한다.

지향성 그래프의 정점과 간선을 삭제하는 코드의 구현은 edges 객체에서 원점이 되는 정점만을 삭제해야 한다는 점을 제외하고는 무지향성 그래프의 구현과 동일하다.

- DirectedGraph.js

### 그래프 순회

그래프를 순회하는 방법은 다양하다.  
가장 일반적인 방법으로 너비 우선 검색과 깊이 우선 검색이 있다.

##### 너비 우선 검색

너비 우선 검색(BFS)은 그래프에서 연결된 노드와 해당 노드들 간의 간선을 순서대로 검색하는 알고리즘을 말한다.

트리 자료 구조에 대한 차수 우선 순위와 마찬가지로 너비 우선 검색은 큐를 필요로 한다.

p. 336 ~ 337 참고

- DirectedGraph.js

##### 깊이 우선 검색

깊이 우선 검색(DFS)은 그래프에서 다른 연결을 방문하기 전에 하나의 연결을 깊게 파고들며 순회하는 검색 알고리즘을 말한다.

p. 338 ~ 341 참고

- DirectedGraph.js

### 가중치가 있는 그래프와 최단 경로

##### 가중치가 있는 간선을 지닌 그래프

간선이 연결을 형성한다면 가중치를 해당 연결에 할당할 수 있다.

도표상에서 간선의 길이는 간선의 가중치와는 무관하다.

가중치가 있는 간선 그래프에 있어 가장 중요한 질문은 어떤 노드에서 다른 노드까지의 가장 짧은 경로가 무엇인지다.  
그래프의 최단 경로 알고리즘에는 여러 종류가 있다.

##### 다익스트라의 알고리즘: 최단 경로

다익스트라의 알고리즘은 목적지에 도달하기 위해 각 단계에서 최단 경로를 취하는 방식으로 동작한다.  
처음에는 일부 노드에 도달할 수 없을 수도 있기 때문에 거리를 무한으로 표기한다.  
그러고 나서 각 순회 반복 루프 때마다 각 노드에 대한 최단 경로를 선택한다.

p. 343 ~ 344 참고

시간 복잡도 개선에 관한 내용 p. 346 참고

- DirectedGraph.js

### 위상 정렬

지향성 그래프의 경우 다양한 적용 사례에 있어 어떤 노드를 가장 먼저 처리해야 할지 알아야 한다.  
이러한 예로 작업 스케줄러가 있다.  
작업 스케줄러에서는 한 작업이 이전 작업이 수행됐는지 여부에 의존도를 지닌다.

위상 정렬 알고리즘은 이러한 기능을 구현한다.  
위상 정렬 알고리즘은 순서를 기록하기 위해 스택을 사용하는 수정된 버전의 깊이 우선 정렬이다.

위상 정렬 알고리즘의 동작 방식은 어떤 노드로부터 깊이 우선 정렬을 수행해 해당 노드와 연결된 모든 노드들을 재귀적으로 방문하면서 해당 노드들을 스택에 추가한다.

위상 정렬은 재귀 호출이 무한 루프에 빠지지 않도록 방문한 노드 집합을 가지고 있다.  
어떤 노드가 주어졌을 때 해당 노드는 방문한 노드 집합에 추가되고 아직 방문하지 않은 해당 노드의 이웃들은 다음번 재귀 호출에서 방문한다.  
재귀 호출의 끝에서 unshift 함수를 사용해 현재 노드의 값을 스택의 맨 앞에 추가한다.  
이는 순서가 시간순이 되도록 보장한다.

위상 정렬 알고리즘은 단순히 추가적인 스택을 지닌 깊이 우선 정렬이다.  
따라서 위상 정렬 알고리즘의 시간 복잡도는 깊이 우선 정렬과 동일하다.  
위상 정렬은 스택에 모든 정점을 저장해야 하기 때문에 O(V)의 공간을 필요로 한다.  
위상 정렬 알고리즘은 주어진 의존도를 기반으로 작업을 스케줄링하는 데 뛰어나다.

### 요약

정점으로 구성되고 간선을 통해 연결된 그래프는 많은 다양한 방식으로 자료 구조 형태로 표현될 수 있다.

그래프가 밀집인 경우 행렬을 기반으로 그래프를 표현하는 것이 낫다.  
그래프의 간선에서 가중치는 연결된 정점의 중요도를 나타낸다.

| 속성   | 설명                                                         |
| ------ | ------------------------------------------------------------ |
| 밀집   | 정점 간에 연결이 많다.                                       |
| 희소   | 정점 간에 가능한 연결 중에 극히 일부만이 존재한다.           |
| 순환   | 한 정점에서 출발해 해당 정점으로 다시 돌아오는 경로가 존재한다. |
| 비순환 | 한 정점에서 출발해 해당 정점으로 다시 돌아오는 경로가 존재하지 않는다. |
| 지향   | 그래프의 간선 사이에 방향이 존재한다.                        |
| 무지향 | 그래프의 간선 사이에 방향이 존재하지 않는다.                 |

| 알고리즘       | 설명/사용 사례                                               | 시간 복잡도 |
| -------------- | ------------------------------------------------------------ | ----------- |
| 너비 우선 검색 | 같은 단계(차수)에 있는 이웃 노드들을 우선 방문하여 그래프를 순회한다. | O(V + E)    |
| 깊이 우선 검색 | 한 노드와 연결된 노드를 깊이 방향으로 우선 방문하여 그래프를 순회한다. | O(V + E)    |
| 다익스트라     | 한 정점에서 나머지 정점들까지의 최단 경로를 찾는다.          | O(V^2 + E)  |
| 위상 정렬      | 지향성 그래프를 정렬한다. 작업 스케줄링 알고리즘에 유용하다. | O(V + E)    |

